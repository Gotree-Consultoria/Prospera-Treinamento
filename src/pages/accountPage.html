<div class="page" id="accountPage">
   <section class="page-header">
      <div class="container">
         <h1>
            Minha Conta
         </h1>
      </div>
   </section>
   <section class="account-content">
      <div class="container">
         <div class="account-grid">
               <div class="account-sidebar">
               <div class="account-menu">
                  <a class="menu-item active" href="#" data-section="profile">
                     <i class="fas fa-user">
                     </i>
                     Perfil
                  </a>
                  <!-- Submenu de Perfil -->
                  <div class="menu-submenu" id="profileSubmenu">
                     <a class="submenu-item" href="#" data-section="profile" data-action="showDados">Dados Cadastrais</a>
                     <a class="submenu-item" href="#" data-section="profile" data-action="showPayments">Pagamentos</a>
                     <a class="submenu-item" href="#" data-section="profile" data-action="togglePasswordEdit">Trocar Senha</a>
                     <a class="submenu-item" href="#" data-page="orgManagement">Gestão de empresas</a>
                  </div>
                  <a class="menu-item" href="#" data-section="plans">
                     <i class="fas fa-layer-group"></i>
                     Planos &amp; Assinatura
                  </a>
                  <a class="menu-item" href="#" data-page="learning">
                     <i class="fas fa-graduation-cap"></i>
                     Cursos &amp; Treinamentos
                  </a>
                  
                  <div class="logout-button-sidebar">
                     <button data-auth-action="logout">Sair da Conta</button>
                  </div>
               </div>
               </div>
               <div class="account-section active" id="profileSection">
                  <!-- Dados Cadastrais (contém a lógica de 'Meu Perfil') -->
                  <div id="dadosCadastrais" class="dados-cadastrais">
                     <h2>Dados Cadastrais <span class="info-dot" tabindex="0" aria-label="Informação">i
                        <span class="info-tooltip">Para alterações, entre em contato com a central de atendimento ao cliente.</span>
                     </span></h2>
                     <div id="profileView" class="profile-infos">
                        <ul class="profile-view">
                           <!-- Email movido para a lista abaixo; apenas exibição e tooltip de contato -->

                           <!-- Dados pessoais parcialmente mascarados -->
                           <li class="verified-section">
                              <hr class="verified-separator" />
                              <ul class="verified-list">
                                 <li><strong>Nome completo:</strong> <span id="userName"></span></li>
                                 <li><strong>E-mail:</strong> <span id="userEmail"></span></li>
                                 <li><strong>CPF:</strong> <span id="userCPF" class="masked">—</span></li>
                                 <li><strong>Data de Nascimento:</strong> <span id="userBirth" class="masked">—</span></li>
                                 <li><strong>Telefone:</strong> <span id="userPhone" class="masked">—</span></li>
                              </ul>
                           </li>
                              <li>
                                 <div id="completeProfileNotice" class="inline-notice hidden">
                                    <small>Seu perfil está incompleto. <a href="#" data-page="createPf">Complete seu perfil</a>.</small>
                                 </div>
                              </li>
                        </ul>
                     </div>

                     <!-- Edição de perfil (nome/telefone) -->
                     <div id="profileEditForm" class="hidden">
                        <form id="profileUpdateForm">
                           <div class="edit-fields">
                              <div class="edit-credentials">
                                 <label for="editName">Nome</label>
                                 <input type="text" id="editName" name="name" />
                              </div>
                             

                              <div id="saveProfileButton" class="buttons-edit-profile">
                                 <button type="submit">Salvar</button>
                              </div>
                           </div>
                        </form>
                     </div>

                     <!-- botão de editar nome e telefone removido conforme solicitado -->
                     <div id="cancelProfileEditButton" class="cancel-button hidden">
                        <button type="button" data-action="toggleProfileEdit">Cancelar</button>
                     </div>

                     <!-- Controles de perfil movidos para dentro de Dados Cadastrais -->
                     <!-- bloco de alteração de e-mail consolidado dentro da visualização de perfil -->

                     <!-- bloco de alteração de senha removido daqui; mantém-se apenas na subseção 'Trocar Senha' -->
                  </div>

                  <!-- Pagamentos (subseção dentro de Perfil) -->
                  <div id="paymentsSection" class="account-subsection hidden">
                     <h3>Pagamentos</h3>
                     <p>Aqui você pode gerenciar seus cartões ou formas de pagamento. (Mock estático)</p>
                     <div class="payment-list">
                        <div class="payment-item">
                           <strong>Cartão Visa •••• 1234</strong>
                           <div>Nome: João Silva</div>
                           <div>Válido até 12/2026</div>
                           <div class="payment-actions-row">
                              <button class="btn btn-small">Definir como padrão</button>
                              <button class="btn btn-small">Remover</button>
                           </div>
                        </div>
                        <div class="payment-item">
                           <strong>Cartão MasterCard •••• 9876</strong>
                           <div>Nome: Maria Oliveira</div>
                           <div>Válido até 03/2027</div>
                           <div class="payment-actions-row">
                              <button class="btn btn-small">Definir como padrão</button>
                              <button class="btn btn-small">Remover</button>
                           </div>
                        </div>
                     </div>
                     <div class="payment-actions">
                        <button class="btn btn-account-secondary btn-small">Adicionar Método de Pagamento</button>
                     </div>
                  </div>

                  <!-- Trocar Senha (form embutido no perfil para melhor UX) -->
                  <div id="changePasswordSubsection" class="account-subsection hidden">
                     <h3>Trocar Senha</h3>
                     <form id="changePasswordForm">
                        <div class="form-group">
                           <label for="currentPassword">Senha Atual</label>
                           <input type="password" id="currentPassword" name="currentPassword" />
                        </div>
                        <div class="form-group">
                           <label for="newPassword">Nova Senha</label>
                           <input type="password" id="newPassword" name="newPassword" />
                        </div>
                        <div>
                           <button type="submit" data-action="savePassword">Salvar Nova Senha</button>
                        </div>
                     </form>
                  </div>

                  <!-- Seção Empresa (apenas para Admin PJ) -->
                  <div id="companyAdminSection" class="account-section hidden">
                     <h2>Administração da Empresa</h2>
                     <p class="muted">Painel para administradores: gerenciar subusuários e relatórios (mock).</p>

                     <section class="company-info">
                        <div><strong>Empresa:</strong> <span id="companyNameDisplay">—</span></div>
                        <div><strong>CNPJ:</strong> <span id="companyCNPJDisplay">—</span></div>
                        <div><strong>Plano:</strong> <span id="companyPlanDisplay">—</span></div>
                     </section>

                     <hr />

                     <div class="company-tabs">
                        <button class="btn btn-small" data-action="showCompanyTab" data-tab="users">Subusuários</button>
                        <button class="btn btn-small" data-action="showCompanyTab" data-tab="import">Importar (CSV)</button>
                        <button class="btn btn-small" data-action="showCompanyTab" data-tab="reports">Relatórios</button>
                     </div>

                     <div id="companyTab_users" class="company-tab-content">
                        <h3>Subusuários</h3>
                        <p>Convide funcionários para criar contas vinculadas à empresa.</p>
                        <div class="invite-row">
                           <input type="email" id="inviteEmail" placeholder="email@funcionario.com" />
                           <button class="btn btn-account-secondary" data-action="inviteSubuser">Convidar</button>
                        </div>
                        <div class="import-preview">
                           <label class="sr-only" for="importCsvInput">Importar CSV</label>
                           <input type="file" id="importCsvInput" accept=".csv" />
                           <button class="btn btn-small" data-action="importCSV">Processar CSV</button>
                        </div>
                        <h4>Lista de subusuários</h4>
                        <ul id="subusersList" class="subusers-list"></ul>
                     </div>

                     <div id="companyTab_import" class="company-tab-content hidden">
                        <h3>Importar CSV</h3>
                        <p>Formato esperado: nome,email,cpf (uma linha por funcionário)</p>
                        <div id="importPreviewContainer"></div>
                     </div>

                     <div id="companyTab_reports" class="company-tab-content hidden">
                        <h3>Relatórios</h3>
                        <p>Relatórios mock com exportação CSV.</p>
                        <div class="reports-actions">
                           <button class="btn btn-small" data-action="exportReport" data-report="progress">Exportar Progresso por Curso (CSV)</button>
                           <button class="btn btn-small" data-action="exportReport" data-report="employees">Exportar Lista de Funcionários (CSV)</button>
                        </div>
                        <div id="reportsPreview"></div>
                     </div>
                  </div>


               <div class="account-section hidden" id="plansSection">
                  <h2>Planos &amp; Assinatura</h2>
                  <div class="plans-wrapper">
                     <div class="current-plan" id="currentPlanBox">
                        <h3>Seu Plano Atual</h3>
                        <p id="currentPlanName">Gratuito (Acesso Admin)</p>
                        <p class="muted" id="currentPlanDesc">Todos os conteúdos liberados para gestão e testes internos.</p>
                        <div class="plan-meta"><span id="planRenewalInfo">Renovação: —</span></div>
                     </div>
                     <hr />
                     <h3>Outros Planos</h3>
                     <div class="plan-cards" id="availablePlans">
                        <div class="plan-card" data-plan="starter">
                           <h4>Starter</h4>
                           <p>Acesso a E-books globais.</p>
                           <div class="price">R$ 29,90/mês</div>
                           <button class="btn btn-small" disabled>Em breve</button>
                        </div>
                        <div class="plan-card" data-plan="pro">
                           <h4>Pro</h4>
                           <p>E-books + Cursos Gravados.</p>
                           <div class="price">R$ 59,90/mês</div>
                           <button class="btn btn-small" disabled>Em breve</button>
                        </div>
                        <div class="plan-card" data-plan="enterprise">
                           <h4>Enterprise</h4>
                           <p>Catálogo completo + Gestão de Setores.</p>
                           <div class="price">Custom</div>
                           <button class="btn btn-small" disabled>Fale Conosco</button>
                        </div>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </div>
   </section>
</div>