<div class="page" id="orgMembersPage">
  <div class="container">
    <div class="card form-card org-members-card" role="region" aria-labelledby="orgMembersTitle">
      <div class="form-header-row">
        <div class="form-header-left">
          <button class="btn-back" data-page="orgManagement" aria-label="Voltar para Gestão de empresas">←</button>
        </div>
        <div class="form-header-right">
          <button id="leaveOrgButton" class="btn btn-link leave-org-header-btn" aria-label="Sair da organização">Sair da Organização</button>
        </div>
      </div>
      <h2 id="orgMembersTitle" class="text-center">Membros da Organização</h2>
  <div id="orgMembersMessages" class="form-messages" aria-live="polite"></div>
      <div id="orgTitle" class="org-title text-center"></div>

      <div class="members-actions">
        <form id="inviteMemberForm" class="invite-form">
          <input id="inviteMemberEmail" name="email" type="email" placeholder="Informe o Email do Novo Membro" required class="input-field" aria-label="Email do membro" />
          <label for="inviteMemberRole" class="sr-only">Função</label>
          <select id="inviteMemberRole" name="role" class="input-select" aria-label="Função do membro">
            <option value="ORG_MEMBER">Membro</option>
            <option value="ORG_ADMIN">Administrador</option>
          </select>
          <button type="submit" class="btn btn-account-secondary">Convidar</button>
        </form>
        
      </div>

      <h3 class="text-center">Lista de membros</h3>
      <div class="table-responsive">
        <table id="orgMembersTable" class="table members-table">
          <thead>
            <tr><th>Nome</th><th>Email</th><th>Função</th><th>Ação</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <hr />
      <section id="orgSectorsSection" aria-labelledby="orgSectorsTitle" class="org-sectors-section">
        <h3 id="orgSectorsTitle" class="text-center">Setores Adotados pela Organização</h3>
        <div class="org-sectors-add" id="orgSectorsAddRow">
          <div class="osa-inline">
            <label for="addOrgSectorSelect" class="sr-only">Selecionar setor para adicionar</label>
            <div class="osa-select-wrap">
              <select id="addOrgSectorSelect" class="input-select" aria-label="Selecionar setor">
                <option value="" disabled selected>Selecione um setor do catálogo...</option>
              </select>
            </div>
            <button id="addOrgSectorBtn" class="btn btn-account-secondary" type="button" disabled>Adicionar</button>
          </div>
          <div class="osa-meta">
            <small id="orgSectorsCountBadge" class="osa-badge" aria-live="polite">0 adotados</small>
            <div id="addOrgSectorFeedback" class="form-messages" aria-live="polite"></div>
          </div>
        </div>
        <div id="orgSectorsMessages" class="form-messages" aria-live="polite"></div>
        <div class="table-responsive" id="orgSectorsWrapper">
          <table id="orgSectorsTable" class="table sectors-table">
            <thead>
              <tr><th class="col-id">ID</th><th class="col-name">Nome do Setor</th><th class="col-actions">Ações</th></tr>
            </thead>
            <tbody>
              <tr><td colspan="3">Carregando setores...</td></tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>

  <!-- Modal de promoção para evitar remoção do último admin -->
  <div id="promoteModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="promoteModalTitle">
    <div class="modal-content">
      <h3 id="promoteModalTitle">Promover outro membro para Administrador</h3>
      <p id="promoteModalMessage"></p>
      <div id="promoteMembersList" class="promote-members-list"></div>
      <div class="modal-actions">
        <button id="promoteCancel" class="btn">Cancelar</button>
      </div>
    </div>
  </div>
</div>
